<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Demo Select2</title>
    <!-- Thêm thư viện -->
    <link
      href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .form-container {
        max-width: 600px;
        margin: 0 auto;
      }
      .select2-container {
        width: 100% !important;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="form-container">
      <h2>Góp ý gia phả (Demo Select2)</h2>
      <form>
        <label>Chọn nhân vật liên kết:</label>
        <select id="linked_to" class="js-select2">
          <option value="none">Chọn nhân vật/sự kiện</option>
        </select>
      </form>
    </div>

    <script>
      $(document).ready(function () {
        // 1. Khởi tạo Select2
        $(".js-select2").select2({
          placeholder: "Tìm kiếm nhân vật...",
          allowClear: true,
        });

        // 2. Dữ liệu mẫu (thay thế = $.getJSON trong thực tế)
        const persons = [
          { id: "p001", name: "Phan Văn A", birthYear: 1950 },
          { id: "p002", name: "Ngô Thị B", birthYear: 1960 },
          { id: "p003", name: "Phan Trung C", birthYear: 1970 },
        ];

        // 3. Thêm option vào dropdown
        persons.forEach((person) => {
          $("#linked_to").append(
            new Option(
              `${person.name} (${person.birthYear})`,
              person.id,
              false,
              false
            )
          );
        });

        // 4. Làm mới Select2 sau khi thêm dữ liệu
        $("#linked_to").trigger("change");
      });
    </script>
  </body>
</html>
